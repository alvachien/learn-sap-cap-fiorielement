# 业务场景

添加界面之前，先定义好业务场景。SAP CAP 采用Book Shop作为业务场景，我们不妨也使用类似的业务背景。

使用如下的简易Model：
- Book Category。
- Book。
- User Wish List。

其中，Book Category以及Book只能被Admin维护。普通用户可以查看Book并将其添加到Wish List。


至于是Wish List还是Shopping List，对本篇主要是阐述“添加UI部分”而言，没有本质区别。

# DB Model

首先，看看Model：

```cds
entity Books : cuid, managed {
    title    : localized String(111);
    descr    : localized String(1111);
    stock    : Integer;
    price    : Decimal(9,2);
    currency : Currency;
    category : Association to Categories;
}

entity Categories : CodeList {
    key ID   : Integer;
    parent   : Association to Categories;
    children : Composition of many Categories on children.parent = $self;
}

entity WishLists: managed {
    key userID  : User;
    key book    : Association to  Books;
}
```

# Service Definition

这里，定义两个Service。

## AdminService

这个Service是给后台Admin使用的。

```cds
using { alvachien.learncap.db as db } from '../db/schema';

service AdminService {
    entity Products   as projection on db.Books;
    entity Categories as projection on db.Categories;
}
```

## BookService

这个Service是给前台用户使用的。

```cds
service AdminService {
    @readonly
    entity Products   as projection on db.Books;
    @readonly
    entity Categories as projection on db.Categories;

    entity WishLists as projection on db.WishLists;
}
```

# UI part

创建`app`文件夹。

- package.json
- fiori.html
- index.cds
- common.cds
- `appconfig` folder


## Common.cds

## Index.cds

## Fiori

## `appconfig` 

`fioriSandboxConfig.json`


## Sub folder

### Folder `manage-books`

- `package.json`
- `fiori-service.cds`
- Folder `webapp`
    - `index.html`
    - `Component.js`
    - `manifest.json`
    - Folder `i18n`
        - `i18n.properties`

### Folder `browse-books`

- `package.json`
- `fiori-service.cds`
- Folder `webapp`
    - `index.html`
    - `Component.js`
    - `manifest.json`
    - Folder `i18n`
        - `i18n.properties`

## Changes on the `srv`

## Folder `index`

## Folder `META-INF` under `resource`

## Change the POM file to expose the folder

```xml
    <configuration>
        <skip>false</skip>
        <!-- use project root directory as working directory to deliver fiori resources -->
        <workingDirectory>..</workingDirectory>
    </configuration>
```